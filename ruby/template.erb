# SYSTEM
$config['system']['domain'] = "<%= hash['system']['domain'] %>";

# SYSTEM
<% hash['system']['dnsserver'].each do |ka, va| %>
$config['system']['dnsserver'][<%= ka %>] = "<%= va %>";
<% end %>

# INTERFACES
<% hash['interfaces'].each do |ka, va| %>
<% va.each do |kb, vb| %>
$config['interfaces']['<%= ka %>']['<%= kb %>'] = "<%= vb %>";
<% end %>
<% end %>

# HASYNC
<% hash['hasync'].each do |ka, va| %>
$config['hasync']['<%= ka %>'] = "<%= va %>";
<% end %>

# VLANS
<% hash['vlans']['vlan'].each do |ka, va| %>
<% va.each do |kb, vb| %>
$config['vlans']['vlan'][<%= ka %>]['<%= kb %>'] = "<%= vb %>";
<% end %>
<% end %>

# VIRTUALIP
<% unless hash['virtualip'].nil? %>
<% hash['virtualip']['vip'].each do |ka, va| %>
<% va.each do |kb, vb| %>
$config['virtualip']['vip'][<%= ka %>]['<%= kb %>'] = "<%= vb %>";
<% end %>
<% end %>
<% end %>

# Write changes
write_config();

# Go
exec;

exit
